# aws-infrastructure-practice

AWS 3層アーキテクチャをTerraformで構築する学習リポジトリ

## 構成図

```
                    ┌─────────────┐
                    │     ALB     │
                    └──────┬──────┘
                           │
           ┌───────────────┼───────────────┐
           │               │               │
    ┌──────▼──────┐ ┌──────▼──────┐       │
    │  EC2 (Web)  │ │  EC2 (Web)  │       │
    │  AZ-a       │ │  AZ-c       │       │
    └──────┬──────┘ └──────┬──────┘       │
           │               │               │
           └───────┬───────┘               │
                   │                       │
            ┌──────▼──────┐         ┌──────▼──────┐
            │     RDS     │         │   Bastion   │
            │   (MySQL)   │         │    (EC2)    │
            └─────────────┘         └─────────────┘
```

## 構築リソース（39リソース）

| カテゴリ | リソース |
|----------|----------|
| ネットワーク | VPC, パブリックサブネット×2, プライベートサブネット×2, IGW, NAT Gateway, Route Table |
| コンピューティング | EC2×2（Webサーバー）, EC2（踏み台サーバー） |
| データベース | RDS (MySQL 8.0), DBサブネットグループ |
| ロードバランサー | ALB, ターゲットグループ, リスナー |
| セキュリティ | Security Group×4（Web, DB, RDS, ALB） |

## 技術的ポイント

- **Security Group連鎖設計**: IPアドレスではなくSGをソースに指定
- **user_data**: EC2起動時にApache自動インストール
- **マルチAZ構成**: 可用性を考慮したサブネット設計
- **プライベートサブネット**: NAT Gateway経由でインターネットアクセス

## 参考書籍

- [Amazon Web Services 基礎からのネットワーク＆サーバー構築](https://www.nikkeibp.co.jp/atclpubmkt/book/21/284800/)

※ 書籍の内容をTerraform化し、ALBを追加実装